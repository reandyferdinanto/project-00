$(".show-password").click(function () {
  const inputId = $(this).data("input");
  const passwordInput = $(inputId);

  if (passwordInput.attr("type") === "password") {
    passwordInput.attr("type", "text");
    $(this).html(`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 64 64" fill="none">
                    <path d="M51.4661 43.9996L42.9328 35.4663C43.2884 34.7107 43.555 33.9441 43.7328 33.1663C43.9106 32.3885 43.9995 31.5552 43.9995 30.6663C43.9995 27.3329 42.8328 24.4996 40.4995 22.1663C38.1661 19.8329 35.3328 18.6663 31.9995 18.6663C31.1106 18.6663 30.2773 18.7552 29.4995 18.9329C28.7217 19.1107 27.955 19.3774 27.1995 19.7329L20.3995 12.9329C22.2217 12.1774 24.0884 11.6107 25.9995 11.2329C27.9106 10.8552 29.9106 10.6663 31.9995 10.6663C38.355 10.6663 44.0661 12.3441 49.1328 15.6996C54.1995 19.0552 57.9995 23.4218 60.5328 28.7996C60.6661 29.0218 60.755 29.2996 60.7995 29.6329C60.8439 29.9663 60.8661 30.3107 60.8661 30.6663C60.8661 31.0218 60.8328 31.3663 60.7661 31.6996C60.6995 32.0329 60.6217 32.3107 60.5328 32.5329C59.5106 34.7996 58.2328 36.9107 56.6995 38.8663C55.1661 40.8218 53.4217 42.5329 51.4661 43.9996ZM50.9328 58.3996L41.5995 49.1996C40.0439 49.6885 38.4773 50.0552 36.8995 50.2996C35.3217 50.5441 33.6884 50.6663 31.9995 50.6663C25.6439 50.6663 19.9328 48.9885 14.8661 45.6329C9.79948 42.2774 5.99948 37.9107 3.46615 32.5329C3.33281 32.3107 3.24392 32.0329 3.19948 31.6996C3.15503 31.3663 3.13281 31.0218 3.13281 30.6663C3.13281 30.3107 3.15503 29.9774 3.19948 29.6663C3.24392 29.3552 3.33281 29.0885 3.46615 28.8663C4.39948 26.8663 5.51059 25.0218 6.79948 23.3329C8.08837 21.6441 9.51059 20.0885 11.0661 18.6663L5.53281 13.0663C5.04392 12.5774 4.79948 11.9663 4.79948 11.2329C4.79948 10.4996 5.06615 9.86628 5.59948 9.33294C6.08837 8.84405 6.71059 8.59961 7.46615 8.59961C8.2217 8.59961 8.84392 8.84405 9.33281 9.33294L54.6661 54.6663C55.155 55.1552 55.4106 55.7663 55.4328 56.4996C55.455 57.2329 55.1995 57.8663 54.6661 58.3996C54.1773 58.8885 53.555 59.1329 52.7995 59.1329C52.0439 59.1329 51.4217 58.8885 50.9328 58.3996ZM31.9995 42.6663C32.4884 42.6663 32.9439 42.6441 33.3661 42.5996C33.7884 42.5552 34.2439 42.4663 34.7328 42.3329L20.3328 27.9329C20.1995 28.4218 20.1106 28.8774 20.0661 29.2996C20.0217 29.7218 19.9995 30.1774 19.9995 30.6663C19.9995 33.9996 21.1661 36.8329 23.4995 39.1663C25.8328 41.4996 28.6661 42.6663 31.9995 42.6663ZM39.0661 31.5996L31.0661 23.5996C33.5995 23.1996 35.6661 23.9107 37.2661 25.7329C38.8661 27.5552 39.4661 29.5107 39.0661 31.5996Z" fill="#1E5C44"/>
                  </svg>`);
  } else {
    passwordInput.attr("type", "password");
    $(this).html(`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M10 13.3333C11.0417 13.3333 11.9271 12.9687 12.6563 12.2396C13.3855 11.5104 13.75 10.625 13.75 9.58333C13.75 8.54166 13.3855 7.65625 12.6563 6.92708C11.9271 6.19791 11.0417 5.83333 10 5.83333C8.95837 5.83333 8.07296 6.19791 7.34379 6.92708C6.61462 7.65625 6.25004 8.54166 6.25004 9.58333C6.25004 10.625 6.61462 11.5104 7.34379 12.2396C8.07296 12.9687 8.95837 13.3333 10 13.3333ZM10 11.8333C9.37504 11.8333 8.84379 11.6146 8.40629 11.1771C7.96879 10.7396 7.75004 10.2083 7.75004 9.58333C7.75004 8.95833 7.96879 8.42708 8.40629 7.98958C8.84379 7.55208 9.37504 7.33333 10 7.33333C10.625 7.33333 11.1563 7.55208 11.5938 7.98958C12.0313 8.42708 12.25 8.95833 12.25 9.58333C12.25 10.2083 12.0313 10.7396 11.5938 11.1771C11.1563 11.6146 10.625 11.8333 10 11.8333ZM10 15.8333C7.97226 15.8333 6.12504 15.2674 4.45837 14.1354C2.79171 13.0035 1.58337 11.4861 0.833374 9.58333C1.58337 7.68055 2.79171 6.16319 4.45837 5.03124C6.12504 3.8993 7.97226 3.33333 10 3.33333C12.0278 3.33333 13.875 3.8993 15.5417 5.03124C17.2084 6.16319 18.4167 7.68055 19.1667 9.58333C18.4167 11.4861 17.2084 13.0035 15.5417 14.1354C13.875 15.2674 12.0278 15.8333 10 15.8333Z" fill="white"/>
                </svg>`);
  }
});

$("#form-login").on("submit", function (e) {
  e.preventDefault();
  const formData = new FormData(this);

  $.ajax({
    url: "/api/v1/admins/login",
    type: "POST",
    data: formData,
    contentType: false,
    enctype: "multipart/form-data",
    processData: false,
    success: function (response) {
      if (response.status == "success") {
        window.location = response.route;
      }
    },
    error: function (data, status, error) {
      $(`<div class="bg-red-500/80 fixed top-8 left-1/2 -translate-x-1/2 min-w-[400px] text-center py-1.5 rounded-lg border border-red-900 text-[#000] text-sm z-10">${status}: ${data.responseJSON.error}</div>`)
        .insertBefore("#login-page")
        .delay(3000)
        .fadeOut("slow", function () {
          $(this).remove();
        });
    },
  });
});
